# ふつうのコンパイラをつくろう

## 環境

- 前提
  - Linux上にJREがインストールされていること
  - dockerでLinuxを構築し、JREを導入する
- 構成
  - [dokcer.md](./docker.md)を参照すること

## Note

- 実行可能ファイルとは？
  - 通常はELF(Execute and Linking format)という特定の形式を満たしたファイルのこと
- gccはどうやって実行可能ファイルを生成している？
  - プリプロセス・コンパイル・アセンブル・リンクの4段階を経て生成している
- コンパイルのプロセス
  - 構文解析（パース:parse）
    - 人間が作成したコードをコンピュータが理解しやすい形に変換する
    - 理解しやすい構造とは？
      - 構文木のこと
  - 意味解析
    - 構文解析によって得られた構文木を解析する。例えば
      - 変数がローカルかグローバルなのか
      - 宣言と参照を紐づける
      - 式チェック
      - 初期化チェックなど
    - このようなコードの見た目以外の解析を行う
  - 中間表現生成
    - コンパイラ内部で使用される中間表現という構造に変換する
    - あえて中間表現を生成する理由は？
      - 複数の言語に対応するため
    - gccであればc言語やc++、Fortranをコンパイルできる。この言語ごとにコンパイラを作成していたら非常に手間なので、言語の中間表現生成を行うことで対応を減らすことができる。
  - コード生成
    - 中間表現をアセンブリ言語に変換すること
    - このプロセスでは、プログラミング言語とアセンブリ言語のギャップを埋める作業をメインとして行なっている。
- 構文解析は大きく2段階で行われる
  - 字句解析
    - ソースコードを単語の列に分割する作業
      - 1+2*5を数値と演算子に分割する
    - 字句解析の時点では、空白や改行、コメントは捨てられることが多い
  - 構文解析
